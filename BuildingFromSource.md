# Getting the Source #
If you are using a source archive/tarball, just extract the sources and goto [Build Steps](#Build_Steps.md)

If you wish to use the latest code from version control, first ensure that you have a Mercurial client installed (if you don't have one, install a client for your platform from  [Mercurial Downloads](http://mercurial.selenic.com/downloads/)). Then run the following command -
```
$ hg clone http://ostinato.googlecode.com/hg/ ostinato
```

Once the command completes, the source code will be available in the `ostinato` directory.

After cloning the repository, at any time to retrieve any further updates to the code, run from inside the `ostinato` directory -
```
$ hg pull -u
```

**NOTE: On the Source tab, there is a "Create a clone" button - you should click on that ONLY if you want to start contributing to Ostinato development yourself; if you just want to use Ostinato and build from source, follow the above procedure**

# Prerequisites #
Ostinato has the following dependencies -

  * [QT 4.3+](http://qt-project.org/downloads) (but **not** Qt5.x)
  * [Protocol Buffers 2.3+](http://code.google.com/p/protobuf/downloads/list)
  * [libpcap](http://www.tcpdump.org/) ([Winpcap](http://www.winpcap.org/devel.htm) for Windows)
  * [bindconfig](http://code.google.com/p/bindconfig/downloads/list) (for Windows - optional)

# Build Steps #
The following instructions use the command line shell to build Ostinato. If you wish to use the QtCreator IDE see [Using QtCreator](#Using_Qt_Creator.md)

## Linux/BSD ##
Ensure that you have installed all the [Prerequisites](#Prerequisites.md). Pre-built packages for all the pre-requisites can be obtained via your distribution's package manager (remember to use the devel packages); **for protobuf, you need to install two packages - the protobuf devel library and the protobuf compiler (protoc)**

Make sure that the protobuf compiler `protoc` is in the path while building Ostinato.

Run the following commands from the top level directory -
```
$ qmake
$ make
$ make install
```

NOTE:
  1. On some distros/releases, `qmake` is named as `qmake-qt4`, so if running `qmake` returns a `"not found"` error, try running `qmake-qt4`
  1. qmake should be same version as Qt
  1. `make install` requires superuser privileges - depending on your platform either run it as root or via sudo

To provide a custom install path, pass `PREFIX=/absolute/path/to/prefix/dir` to qmake. The binaries are installed in `$PREFIX/bin/`. The default prefix for Unix platforms is `/usr/local`.

You can use the qmake options `-config debug` or `-config release` to force either debug or release mode.

## Windows ##
These instructions assume the MinGW compiler.

Ensure that you have installed all the [Prerequisites](#Prerequisites.md). QT, Winpcap both offer pre-built ready-to-use binary packages. Protocol Buffers is however available as source only - you will need to build it first before you can build Ostinato. Some important points when building protobuf -
  * Use the [MSYS](http://www.mingw.org/wiki/MSYS) shell; you **can not** use the Windows cmd shell; you **should not** use cygwin
  * Use the same MinGW compiler that was shipped with Qt

Once you have installed all the pre-requisites, set the CPLUS\_INCLUDE\_PATH and LIBRARY\_PATH  environment variables to include the path to the header and library files of all the pre-requisites. Also make sure that the protobuf compiler `protoc.exe` is in your path while building Ostinato.

Run the following commands from the top level source directory -
```
$ qmake
$ make
$ make install
```

`make install` will, by default, install the binaries in `<top-level-directory>/bin`. To provide a custom install path, pass `PREFIX=/absolute/path/to/prefix/dir` to qmake. The binaries are installed in `$PREFIX/bin/`.

To enable exclusive control over a port and prevent stray packets being generated by the OS, Ostinato uses the [bindconfig](http://code.google.com/p/bindconfig) application. Download and copy the executable in the same directory as the server (drone.exe)

## Mac OS X ##
Ensure that you have installed all the [Prerequisites](#Prerequisites.md). libpcap is typically available out of the box on Mac OS X. Qt is available via [fink](http://finkproject.org/) or [macports](http://macports.org). protobuf is available on macports but not on fink (at the time of this writing); you may build protobuf from source.

Make sure that the protobuf compiler `protoc` is in the path while building Ostinato.

Run the following commands from the top level directory -
```
$ qmake -spec macx-g++
$ make
$ sudo make install
```

`make install` will, by default, install the application bundles in `/Applications/bin`. To provide a custom install path, pass `PREFIX=/absolute/path/to/prefix/dir` to qmake. The bundles are installed in `$PREFIX/bin/`.

You can use the qmake options `-config debug` or `-config release` to force either debug or release mode.

# Using Qt Creator #

Ensure that you have installed all the [Prerequisites](#Prerequisites.md). See notes for your platform in [Build Steps](Build_Steps.md) regarding the pre-requisites (ignore the ostinato build instructions there).

Once you have installed all the pre-requisites -

  1. Goto File | Open Project
  1. Select ost.pro
  1. Run Build | Build All

To run Ostinato, you need to run both the server and client executables - by default Qt Creator will just run one of them. To work around this, create a batch/shell script in the top-level directory which starts both the server and client and configure Qt Creator to run the batch/shell script -

  1. Goto Projects Mode (Ctrl-4) | Run Settings
  1. Click on 'Add'
  1. In the drop down select 'Custom Executable'
  1. Configure the ost.bat/ost.sh that you created as the executable

_Windows Only_: You will most likely need to configure the include and library paths for WinPcap and ProtoBuf in the project's build environment -
  1. Goto Projects Mode (Ctrl-4) | Build Environment
  1. Add/modify the following environment variables
    * CPLUS\_INCLUDE\_PATH
    * LIBRARY\_PATH

# Notes #
If you would like to use Ostinato as a "portable application", create an empty file "ostinato.ini" in the same directory as the Ostinato executable.